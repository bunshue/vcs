 日月 光华   - -   Internet 精华区 文章 阅读 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   发信人 :   Perseus   ( 焜 燿 焰灿 · 翔 非扬 ) ,   信 区 :   Internet 标     题 :   JAVA   敲掉 了 几块 防火墙 的 砖 ? 发信站 :   日月 光华 站   ( Sun   Jun   27   16 : 20 : 10   1999 )   ,   转信                             JAVA   敲掉 了 几块 防火墙 的 砖 ?                                             王波 / 译 1996 年 ， 普林斯顿大学 三位 研究 人员 公布 了 一个 Java 程式 ， 成功 地避过 网络 防火墙 （ Firewall ） 。 进入 正题 之前 ， 让 我们 先 介绍 一种 网络 的 基本概念 DNS 与 防火墙 。 DNS   是 “ 域名 服务器 ” （ Domain   Name   Service ） 的 缩写 ， 通过 这项 服务 ， 可以 知道 网络 上 每 一部 机器 对应 的 网络地址 。 可以 把   Internet   上 的 每台 机器 看成 现实生活 中 的 办公室 ， 每个 办公室 外面 都 挂 有 招牌 ， 而 从 招牌 上 的 名称 可以 大致 看出 办公室 的 运作 特性 。 例如 　 www . ibm . com   这个 机器 名称 代表 国际 通用 机器 有限公司 的 WWW 办公室 ， ftp . netscape . com   代表 了 Netscape 的 FTP   办公室 ， 用 浏览器 连上 www . ibm . com 时 ， 好比 向 IBM 的 WWW 办公室 要 要 资料 。 从 这个 比喻 出发 ， 局域网络 （ Local   Area   Network ） 就 如 一栋 办公大楼 ， 大楼 里 各式各样 的 办公室 各自 代表 了 网络 上 的 一部 机器 。 办公室 之所以 具备 名称 ， 主要 是 便于 人们 记忆 。 对 实际 的 网络通信 来说 ， 采用 纯 数字 构成 的 网络 IP地址 ， 比如 ， www . ibm . com 的 IP 是 166.323 . 211.2 ， ftp . netscape . com 办公室 的 网络地址 是 205.218 . 156.36 。 两个 办公室 之间 传送 电子邮件时 ， 实际 运作 的 通信 往来 都 是 通过 网络地址 达成 的 ， 也就是说 ， 无形 的 电子邮件 通道 看到 信封 上 写 着 www . ibm . com 的 收件 处时 ， 必须 向   DNS   询问 对应 的 IP地址 ， 才能 顺利 收发 信件 。 不过 ， 在   DNS   的 世界 里 ， 办公室 与 招牌 名称 并 不 保证 是 一对一 的 关系 ， 这就是说 ， 同一个 机器 名称 可能 对应 了 数个   IP   地址 ， 而 同一个   IP   地址 也 可能 对应 到 不同 的 机器 ， 当初 采用 这种 设计 的 一个 理由 是 ， 方便 系统管理员 以 更 有 弹性 的 方式 调整 不同 机器 的 网络 负荷 。   例如 　 www . yahoo . com   这个 办公室 门口 每天 出现 的 人次 可能 数以万计 ， 系统管理员 利用 同一个 机器 名称 对应 到 不同 的   IP   地址 ， 让 数台 机器 都 挂 着 同样 的 机器 名称 ， 外界 对 同一个 名称 连线 ， 由 不同 的 机器 分头 处理 ， 便 能够 有效 的 分散   WWW   网络 作业 的 庞大 负荷 ， 让 处理 同样 事务 的 办公室 挂 着 同样 的 招牌 ， 对 前来 洽商 的 客户 不仅 清楚 明 了 ， 实际上 也 能 有效 地 缓解 整个 网络 的 巨大 压力 。 DNS   这种 “ 办公室 ” 与 “ 招牌 ” 无须 单一 对应 的 设计 固然 方便 ， 但 却 引发 了 网络通信 的 另 一项 危机   - -   DNS   Spoofing 。 Spoof   原文 有 “ 幽默 而 不 真实 之 描述 ” 的 意思 ， 在 此 暂译 为 “ 伪造 ” ， DNS   Spoofing   基本上 就是 一种 伪造   DNS   结果 的 技巧 ， 电子邮件 通道 向 这种 伪造 过 的   DNS   查号台 查号 ， 就 会 得到 不 正确 的   IP   地址 。 DNS   Spoofing   的 形成 是 由于 Internet 自身 的 弱点 ， 利用 这种 技巧 入侵 网络 的 事件 早有 先例 。 这次 普林斯顿大学 研究 人员 公布 的 研究 结果 ， 倒 是 充分利用 了 伪造   DNS 的 特殊 技巧 ， 让   Java   通过 防火墙 后 ， 能够 对 其他 机器 任意 进行 连接 ， 完全 不 受 防火墙 的 约束 。 防火墙 （ Firewall ） 是 办公大楼 的 警卫 。 如果 办公大楼 里 的 每个 办公室 代表 局域网络 中 的 一部 电脑 ， 那 防火墙 就是 整栋 办公大楼 的 警卫 ， 大楼 警卫 的 任务 是 监控 所有 进出 的 网络 资料 与 通信 要求 ， 充分 维护 大楼 内部 的 安全 。 例如 ： 隔壁 大楼 某 办公室 派 人 拉 一条 Telnet   或   FTP   管线 到 大楼 门口 ， 要求 与 楼上 另外 一个 办公室 进行 连线 或 传输 档案 时 ， 大楼 警卫 可以 核对 拉线 工人 身上 的 名牌 ， 看看 他 的   IP   地址 是不是 在 安全 范围 之内 。 以 决定 是否 放行 。 如果 一个 局域网络 规定 只有 某些   IP   地址 能够 与 网络 内部 的 机器 连线 ， 就 能 有效 地 把 不明 来源 的 要求 阻隔 在外 ， 让 大楼 警卫 先 过滤 进出 的 各种 身份 ， 赶走 一些 可疑 的 不明 人士 。 通常 ， 防火墙 程序 就是 以 这样 的 方式 ， 区分 公司 内部 网络 与 外部 网络 ， 尽可能 将 不必要 的 外部 请求 切断 ， 避免 内部 网络 受到 无谓 的 干扰 或 攻击 。 防火墙 的 观念 与 作法 对 保护 网络 来说 ， 发挥 了 相当 显着 的 效果 ， 也 被 各界 广泛 采用 。 问题 出 在 一旦 警卫 认为 来访 人士 身份 正确 ， 所属 之   IP   地址 代表 可 信任 的 机器 ， 后面 的 细节 就 不 在 警卫 的 管辖 范围 之内 了 ， 以   Telnet   来说 ， 外面 的 机器 经过 大楼 警卫 的 许可 与 内部 的 机器 进行 联系 之后 ， 双方 相互 传输 的 数据 ， 防火墙 是 不能 控制 的 。 所以 ， 防火墙 可以 杜绝 不明 身份 的 连接 请求 ， 却 不能 防止 使用 通过 正当 的   Telnet 连线 进行 不 正当 系统 操作 。 　 　 　   用   Java   写成 的   Applet   放在 网络 上 ， 使用者 连 上   Homepage 后 就 等于 将 其中 的 Applet 程序 下载 到 自己 的 电脑 上 执行 。 Java   语言 在 设计 之初 便 有着 许多 安全 方面 的 考虑 ， Applet 被 下载 到 用户 端的 电脑 上 执行 时 ， 负责 执行 的 直译器 （ Interpreter ） 也 能 一一 检查 每个 指令 对系统 来说 是否 安全 。 不过 对   DNS   Spoofing   的 效果 来说 ， Java   小组 却 意外 地 没有 避开 这项 网络 漏洞 ， 让 人 有机 可 趁 了 。   　 普林斯顿大学 实验 的 报告 可 归纳如下 ： 　 　   【 实验 背景 】 受害 机器 的 名称 是   target . victim . org 　 IP   地址   10.10 . 10.2 无辜 机器 的 名称 是   stooge . victim . org 　 IP   地址   10.10 . 10.1 攻击者 的 机器 名称   www . attacker . org 　   IP   地址   172.16 . 16.16 　 IP   范围 在   10.10 . 10.1   到   10.10 . 10.255   之内 的 机器 都 受到 防火墙 的 保护 ， 拒绝接受 外界 的 任何 连接 请求 ， 正常 情况 下 攻击者 无法 对 防火墙 内部 的 机器 要求 直接 连线 。 　 　 　 　   【 准备 活动 】 攻击者 建立 一部 假 机器 名为   bogus . attacker . org 　 并且 让   DNS   把 这部 机器 同时 对应 到   10.10 . 10.2   与   172.16 . 16.16   两个 地址 【 启动 攻击 】 无辜 的 用户 在   stooge . victim . org   机器 上 通过 浏览器 连到 www . attacker . org   时 ， 攻击者 事先 写 好 放在   Homepage   上 的   Applet   程式 便 进入 用户端 开始 执行 ， 这个 Applet   一边 执行 看来 无害 的 普通 程序 ， 一边 却 悄悄地 准备 攻击 其他 机器 。 首先 这个 程序 暗地里 要求 与   bogus . attacker . org   机器 建立联系 ，   由于   DNS   Spoofing   的 关系 ， 程序 会 得到   10.10 . 10.2   与   172.16 . 16.16   两组   IP   地址 ， 此时 Java   系统 会 把   Applet   程序 的 原始 地址 （ 172.16 . 16.16 ） 与   DNS   的 结果 进行 比较 ， 发现   172.16 . 16.16 在 DNS   查号台 的 查 号 结果 之内 ， 便 允许 下 一步 的 连接 动作 ， 可是 下 一步 实际 进行 连接 时 ， Java   系统 却会 连到   DNS   查到 的 第一个   IP   地址 上 ， 也 就是   10.10 . 10.2 　 ， 就 这样 ， Java   以为 建立 了 合法 的 网络 连线 ， 实际上 却 对   target . victim . org   发出 非法 的 连线 要求 。   利用 这种 方式 ， 一般 常见 的 网络 侵入 技巧 就 可以 直接 攻击   target . victim . org   这部 原本 应该 受到 防火墙 保护 的 机器 。 　 　 　   【 奏效 理由 】 大楼 警卫 应该 保护 所有 办公室 不 受 外界 无谓 的 侵扰 ， 可是 此处 却 完全 派 不 上 用场 。 原因 在于   Java   程式 已经 通过 门口 的 例行 检查 ， 放行 到 某 办公室 里 执行 去 了 ， 进 了 或者 用 已知 的 安全 弱点 在 别的 办公室 门口 上 打洞 。 更 危险 的 是 ， 进入 大楼 的   Java   程式 如果 无法 攻破 其他 办公室 ， 从 理论 上 讲   Java   还 可以 与 基地   ( www . attacker . org ） 联络 ， 运用 或 调派 其他 威力 更强 的 特种部队 ， 利用 特殊 武器 （ 如着 名 的 SATAN 程式 ）   找出 防火墙 内 所有 可能 出现 的 安全漏洞 。 　 　 　   Web   病毒感染 和 蔓延 是 电脑病毒 的 天性 ， 当 使用者 无意间 连 上 不明 的   Web   站 ， 因而 引入 上述 的   Java   程序 ， 导致 内部 网络 受到 威胁 ， 基本上 就 暗示 了 Web / Java   病毒 可能 入侵 。 如果   Java   程序 利用 这种 方式 ， 通过 现有 的 网络 漏洞 入侵 其他 机器 ， 并 将 自己 的 程序 「 植入 」 其他 无害 的   Web   站 ， 则   Web / Java   病毒 的 雏形 就 呼之欲现 了 ， 在   Java   技术 不断 发展 革新 的 今天 ， 虽然 预言   Web / Java   病毒 还 为 之 过早 ， 不过 笔者 在 此 希望 大家 要 开始 正视 网络安全 这一 重要 课题 。 　 　 　 　   　   Sun   加装 办公大楼 监视器 　 　 　   Sun   公司 在 全力 推广 Java 的 同时 ， 自然 不会 让 这样 重要 的 漏洞 继续 存在 。 大致 的 解决 方法 是 ， 为了 让   Java   程序 进入 办公大楼 之后 ， 不会 非法 建立 网络连接 ， Sun   决定 记下 Java   程序 所属 的 来访 单位 ， 记下 了 该 单位 的 机器 名称 与   IP地址 ， 任何 以后 的 网络连接 都 必须 核对 一下 目的 单位 ， 如果 与 来访 单位 不同 者 ， 一律 禁止 。 这种 作法 ， 应该 能够 有效 地 防止 类似 情况 的 出现 。 　 　   另外 ， 加强   DNS   的 安全性 应该 是 更为 可行 的 方法 ， 但是 由于   DNS   本身 是 整个 Internet   非常 重要 的 检索服务 ， 任何 修改 都 会 引发 相当 大 的 困难 和 阻碍 ， 所以 ， 短期 之内 诉诸 实现 可能性 不 大 。 　 - - 我要 飞翔 ， 无论 地狱 还是 天堂 .. !             Welcome   to   http : / /  [ 5mfennivel  [ 10m . isCool . net   ________                                     成功 的 交响曲 ?   胜利 的 代言人 ?   ___     __   \ _____   _____________________   ____     __________   __     / _ /   / _     _   \ __     ___ / __     ___ / _     _   \ _     /   /   / __     ___ /   _     ____ /   /     __ / _     /         _ ( __     )   /     __ / /   / _ /   /   _ ( __     )     / _ /             \ ___ /   / _ /           / ____ /     \ ___ /   \ __ , _ /     / ____ /         ........     is   ready ! ※   来源 : · 日月 光华 站   bbs . fudan . edu . cn · [ FROM :   10.9 . 0.252 ]   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - [ 返回 上 一页 ]   [ 本 讨论区 ]