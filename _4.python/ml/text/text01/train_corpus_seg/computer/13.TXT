 发信人 :   alexander   ( 老鬼 ) ,   信 区 :   Network    标     题 :   网络 融合 还 看 QoS    发信站 :   日月 光华 站   ( Thu   Dec     2   19 : 59 : 38   1999 )   ,   转信         　 　   网络 融合 的 生死存亡 取决于 能否 顺利 地 通过 基于 策略 的 网络    技术 实现 基于 IP 的 QoS   。 然而 ， 基于 策略 的 网络 技术 仍 在 开发 之    中 。         您 相信 网络 融合 吗 ？ 更 确切 地说 ， 您 相信 语音 、 数据 和 视频 能够    和谐 地 在 高速 IP 网络 上 传输 这样 一种 世界 新 秩序 吗 ？         如果 您 相信 的话 ， 您 也 会 相信 基于 策略 的 网络 技术 。 融合 最终 能    否 成功 取决于 IP 社区 以 可 管理 、 可 伸缩 的 方式 实现 服务质量 （ QoS   ）    的 能力 ： 这 正是 基于 策略 的 网络 技术 的 意义 。         现实 表明 ， 基于 策略 的 网络 技术标准 仍 在 制定 之中 ， 协议 还 没有    经过 测试 ， 产品 也 不 成熟 。 基于 策略 的 网络 技术 在 今后 一两年 还    不能 准备就绪 。 但是 ， 开始 学习 基于 策略 网络 技术 的 原理 并 不算    早 。         策略 的 基本原理    策略 规定 了 如何 在 网络 客户 中 提供 网络资源 。 客户 可以 是 用户 、    应用程序 和 主机 ， 而 资源 可以 根据 时间 、 资源 的 使用 以及 客户 的    权限 等 情况 通过 静态 提供 ， 也 可以 通过 动态 提供 。    高级 策略 语句 ， 如 “ 向 所有 IP 语音 数据流 提供 加急 转发 ” ， 被 翻    译 为 “ if   <   条件   >   then   <   行动   > ” 规则 结构化 集合 ， 使 策略    可以 被 不同 的 网络 部件 保存 、   检索 和 解释 。         可惜 的 是 ， 第一代 系统 通常 都 不能 解释 高级 策略 语句 。 相反 ， 这    些 系统 要求 网络管理 人员 来 输入 像 “ if   Port = HTTP ( 80 )   then    set   IP   Precedence = 4 ” 这样 的 策略 。         开发 中 的 架构    基于 策略 的 网络 最 令人鼓舞 的 前景 之一 是 Internet 工程 任务 组    （ IETF ） 在 制定 标准 策略 架构 以及 相关 协议 与 方案 工作 方面 所 取    得 的 进展 。    至少 在表面上 看 已经 初见端倪 的 架构 是 一种 简单 、 精致 的 架构 。    典型 基于 策略 的 网络 将 包括 ：         策略 输入 控制台 ： 网络管理 人员 通过 它 定义 和 编辑 策略 的 一种 管    理 工具 ；         策略决策 点 （ PDP ） ： 从 数据库 中 检索 策略 ， 并 代表 策略 执行 点    （ Policy   Enforcement   Point ， PEP ） 做出 决策 的 策略服务器 ；         PEP ： 通过 访问 列表 、 队列 管理 算法 和 其它 方式 执行 策略决策 的    网络设备 ，   如 路由器 、 交换机 和 防火墙 ；         策略 数据库 ： 保存 策略 的 轻型 目录 访问 协议 （ LDAP ） 兼容 的 目录    服务器 。    PDP 和 PEP 之间 通过 一种 被 称为 通用 开放 策略 服务 （ COPS ） 的 简单    询问 ／ 响应 协议 进行 通信 。 由于 COPS 是 面向 连接 的 ， 并且 十分 可    靠 ， 因此 它 优于 SNMP 。 COPS 中 包括 防止 多个 PDP 同时 试图 更新 同    一个 PEP 的 机制 。    该 架构 没有 规定 实施 的 方法 ， 多个 部件 既 可以 同时 存在 于 一个 物    理 服务器 上 ， 也 可以 存在 于 自己 的 服务器 上 。         策略 规则 必须 以 数据结构 的 形式 来 表示 ， 使 之 可以 被 保存 和 检索 。    为 解决 这一 问题 ， IETF 的 策略 架构 工作组 定义 了 策略 架构 核心 信    息 模型 。 该 模型 规定 了 可以 用于 通用 策略 表示 的 面向对象 类 的 高    级 集合 。 核心 模块 中 的 对象 类 可以 利用 子类 进行 扩展 ， 以 表示 特    定 类型 的 策略 ， 例如 ， QoS 或 网络安全 策略 。         各 厂商 之间 已 就 策略信息 应当 被 保存 在 LDAP 兼容 的 目录 中 取得 了    基本 的 一致 ， 因此 策略 架构 工作组 定义 了 从 核心 信息 模型 到 LDAP    目录 方案 的 映射 。         架构 概念 得到 了 厂商 的 广泛支持 ， 并 在 IETF 的 Internet 草案 中 做    出 了 规定 。 尽管 没有 一项 概念 达到 了 “ 请求 评论 ” （ RFC ） 的 阶段 ，    但 将 这些 想法 集中 在 一起 为 未来 如何 建立 策略 网络系统 指明 了 发    展 方向 。         QoS 标准    共有 三种 与 企业 网络 相关 的 QoS   标准 ： 差别 服务 （ Diff  Serv ） 、    资源 保留 协议 （ RSVP ） 以及 802.1 p 。    Diff  Serv 对 IPv4 服务类型 （ ToS ） 字节 或 IPv6 传输流 级别 如何 用    于 规定 QoS 要求 重新 进行 了 定义 。 Diff  Serv 与 目前 使用 的 ToS 中    的 IP 优先 位是 向 后 兼容 的 。    Diff  Serv   的 目的 是 为 一般 传输流 类型 或 传输流 集合 （ 对应 于单    个 传输流 ） 提供 QoS 。         RSVP 是 一种 基于 流 的 协议 ， 它 允许 应用 通过 网络 发送 端到 端 控制    信息 来 表明 它 所 需要 的 QoS （ 时延 、 抖动 、 带宽 ） 。 传输 路径 上 的    路由器 为 应用 流 保存 资源 ，   或者 拒绝 其 进入 网络 。 一年 多 以前 ，    RSVP 就 已经 在 Cisco 、 Nortel 的 路由器 ， 以及 其它 许多 厂商 的 产品    中 得到 了 应用 。         802.1 p 是 一种 第二层 机制 ， 它 允许 在 802.1 Q 虚拟 LAN 包头 中 使用 三    比特 的 信息 来 标记 数据包 的 QoS 。    企业 网络管理 人员 可能 将 在 多数 QoS 应用 中 采用 Diff  Serv ， 并 在    一些 需要 保留 资源 和 许可 控制 （ 与其 提供 服务质量 很差 的 语音 ，    不如 拒绝 语音 呼叫 ） 的 非常 敏感 的 应用 中 （ 例如 ， IP 语音 ） 选择    使用 RSVP 。    在 Diff  Serv 模型 中 ， 在 网络设备 级 实现 QoS 包括 四个 步骤 。 它们    是 ：         可以 根据 第二层 到 第四层 （ 或 更 高 ） 的 包头 信息 对 数据包 进行 分    类 ；         通过 设置 Diff  Serv 位 ， 标记 数据包 来 指示 类型 ；         根据 策略 对 数据包 进行 处理 （ 在 必要 时有 选择地 丢弃 包 ） ， 以避    免 拥塞 ；         成形 （ 优先 排队 与 转发 ） 。    随着 专用 集成电路 技术 的 进步 不断 使 第三层 功能 成本 更加 低廉 ，    我们 认为 更 高层 （ Layer ） 的 分类 与 标记 功能 将 由 WAN 边缘 完全 回    到 布线 室 中 。 而 布线 室 正 被 多数 厂商 认为 是 这种 功能 最后 的 归宿 。    在实践中 ， 分类 与 标记 功能 涉及 到 创建 访问控制 列表 。 策略 是 由 随    机 早期 检测 或 加权 随机 早期 检测 等 算法 实现 的 。 成形 （ shaping ）    是 利用 加权 轮询 、   加权 公平 排队 、 基于 类 的 排队 、 基于 类 的 加权    公平 排队 以及 其它 算法 实现 的 。         目前 ， 配置 策略 和 成形 算法 是 由 网络管理 人员 在 接口 到 接口 的 基础    上 完成 的 。 这 也 正是 基于 IP 的 QoS 大规模 应用 少之又少 的 原因 。         各 厂商 的 情况    在 过去 一年 到 一年 半 的 时间 里 ， 各大 主要 网络设备 厂商 都 宣布 了 基    于 策略 的 网络 计划 ， 但 只有 很少 几家 厂商 推出 了 产品 。    Cisco         作为 Cisco 公司 CiscoAssure 基于 策略 的 网络 计划 的 一部分 ， 该 公司    3 月 开始 发送 QoS   Policy   Manager   1.0 （ QPM ） 。 CiscoAssure 中 还    包括 实现 网络 安全性 的 策略 管理器 Cisco   Security   Manager 。 QoS    和 安全 管理器 今后 仍 将 作为 独立 的 产品 ， 但是 共享 一个 通用 的 架构 。         QPM 的 图形用户界面 简化 了 QoS 配置 的 许多 方面 。 在 典型 的 会 话 中 ，    用户 可以 添加 新 路由器 ， 可以 为 每个 接口 选择 排队 算法 ， 为 类型 过    滤器 和 行为 （ 设置 IP 优先级 ） 接口 创建 策略 ， 安排 下载 到 路由器 的    策略 。 相同 类型 的 接口 可以 按组 分类 ， 使 策略 既 可以 在 单个 接口 级    实施 也 可以 在 组级 实施 。         QPM 是 第一代 策略 管理器 产品 ： 它 提供 了 一些 可以 提高 生产力 的 好    处 ， 但 仍 有 许多 细节 需要 用户 完成 ， 如 队列 机制 和 成形 参数 的 选择 。    因此 ， 网络管理 人员 仍 需要 了解 Cisco 的 许多 队列 算法 。         QPM 的 首发 版 没有 使用 LDAP 目录 ， 也 没有 使用 COPS 。 这 两种 技术 有    望 在 2000 年 上半年 出现 在 产品 中 （ COPS 目前 正 运行 在 Cisco 的 试验    室 中 ） 。 下一版 产品 还 将 增加 支持 设备 的 数量 ， 由 大约 200 台 设备    增加 为 1000 台 以上 。         Nortel         Nortel 公司 的 Optivity   Policy   Services   1.0 （ OPS ） 于 8 月 开始 发    货 。 OPS 采用 了 IETF 草案 中 描述 的 许多 概念 ， 包括 策略服务器 、    COPS 和 存储 策略信息 的 LDAP 兼容 目录 。         OPS 目前 在 LDAP 目录 树中 自己 的 分支 存放 策略信息 ， 但是 将 在 LDAP    方案 标准 推出 时 迁移 到 IETF 标准 上 。         Nortel 是 第一批 在 网络设备 （ 即 运行 BayRS   13.20 路由 软件 的 路由    器 ） 中 采用 COPS 客户 的 公司 之一 。 OPS 利用 COPS 进行 PDP  PEP 通信 。    它 还 支持 包括 Cisco   路由器 在内 的 其它 设备 。         在 典型 OPS 会话 中 ， 用户 可以 添加 路由器 和 单独 的 接口 ， 可以 使用    过滤器 创建 传输流 模式 ， 创建 像 否定 、 标记 或 策略 这 类 行为 以及    创建 与 传输流 模式 、 行为 和 接口 相关 的 策略 。 相同 类型 的 接口 可    以 按组 分类 。         与 Cisco 公司 的 QPM 类似 ， OPS 提供 了 一些 可以 提高 生产力 的 好处 ，    但 仍 有 许多 细节 需要 用户 完成 。 第一版 产品 中 缺少 的 一个 功能 是    规定 和 控制 接口 队列 机制 的 能力 。 该 功能 必须 在 该 策略 系统 之外 ，    通过 Nortel 公司 的 标准 路由器 配置 软件 来 实现 。 该 公司 预计 在 2000    年 第一季度 将 此 功能 添加 到 OPS 中 。         Cabletron         人们 可能 要说 Cabletron 在 现有 生产 网络 中 开发 基于 策略 的 网络    技术 的 历史 比 其它 任何 公司 都 长 。 四年 前 ， Cabletron 曾 推出 了    一种 早期 PDP 产品 Virtual   Network   Server （ VNS ） 。         不过 ， VNS 当时 是 基于 Cabletron 公司 的 专有 SecureFast   Switching    技术 的 ， 该 公司 目前 开始 不再 采用 专有 技术 ， 而 转向 基于 标准 的    技术 。 该 公司 的 SmartSwitches   现在 支持 802.1 p 这类 QoS 标准 ，    并 支持 使用 ToS ／ Diff  Serv 。 SmartSwitches 还 在 每个 端口 上支    持 四个 队列 ， 支持 WFQ 以及 第二层 到 第四层 分类 和 标记 。 这 就 意    味 着 Cabletron 目前 就 可以 在 布线 室 中 提供 高层 的 分类 和 标记 技    术 ， 而 其它 多数 厂商 正试图 通过 升级 来 实现 。         Cabletron 公司 的 QoS 策略 管理器 （ 称为 Spectrum   Policy   Aware ）    预定 在 2000   年 第一季度 发货 。 策略信息 将 保存 在 LDAP 兼容 的 目录    中 ， PDP   与 PEP   之间 的 通信 将 支持 COPS 以及 其它 协议 。 PEP 也 可以    使用 LDAP 与 目录 服务器进行 通信 。         3Com         3Com 公司 的 策略服务器 也 要 到 2000 年 第一季度 才能 发货 ， 该 产品    目前 暂时 叫 Transcend   Policy   Service 。 该 产品 将 符合 IETF 正在    开发 的 标准 ， 其中 包括 策略 架构 和 采用 COPS 。 策略 将 被 保存 在 LDAP    兼容 的 目录 中 ， 并且 通过 代理服务器 来 提供 对 传统 产品 的 支持 。         3Com 公司 正 通过 向 其 第二 层交换机 中 添加 802.1 p ， 向 第三层 路由    器 添加 ToS   ／ Diff  Serv 和 RSVP 来 开发 具有 QoS 功能 的 多种产品 。    3Com 公司 的 动态 访问 产品 也 提供 了 在 网络 接口卡 （ 只要 是 3Com 网    卡 ） 上 提交 包 分类 和 包 标记 的 功能 。         多 厂商 管理         在 多 厂商 环境 中 ， 基于 策略 的 管理 的 前景 并 不 光明 ， 至少 在 近期    是 这样 。 厂商 与 厂商 之间 实施 策略 与 成形 算法 的 做法 差别 很大 ，    甚至 在 一家 厂商 的 产品线 中 都 是 这样 。 要 使 策略管理 真正 独立 于    厂商 ， 策略 和 成形 的 通用 功能 必须 模型 化 ， 并且 在 QoS 方案 和 策略    信息库 （ PIB ） 中 予以 表示 。 网络设备 必须 支持 PIB 。         多数 厂商 将 支持 自己 的 设备 ， 并 将 尽力 支持 Cisco 产品 。 然而 ，    Cisco 支持 很多 QoS 机制 ， 并且 所 支持 的 机制 会 越来越 多 。 对于 Cisco    公司 来说 ， 支持 所有 的 机制 都 很 困难 ， 更 不要 提 其它 厂商 了 。         尽管 近期 互操作性 前景 十分 暗淡 ， 但 仍 有 理由 感到 乐观 。 实现 互    操作性 的 长期 前景 相对 清晰 ， 厂商 将 投资 实现 互操作性 。         结论    基于 策略 的 网络 技术 无疑 处于 发展 的 早期 阶段 。 IETF 已经 取得 了    巨大进步 ， 但是 仍 有 许多 工作 需要 完成 。 可能 还 需要 一年 ， 多数    有关 标准 才能 达到 RFC 状态 。    可能 更 重要 的 是 ， IP 社区 离 真正 理解 如何 最佳 地 使用 Diff  Serv    和 RSVP 这样 的 技术 来 在 生产 网络 中 实现 QoS 仍 需一到 两年 的 时间 。    一旦 在 此 领域 取得 一定 的 共识 ， 厂商 将 需要 使 客户 可以 方便 地 在    企业 中 实施 这些 技术 。          不过 ， 不要 害怕 跳入 基于 策略 的 大海 中 ， 水是 有 一点 冷 ， 但 正变    得 越来越 暖和 。 现在 涉足 这一 技术 将有助 确保您 的 网络 在 未来 成    为 具备 QoS 的 网络 。         - -                         牡丹 烟下 死 ， 做鬼 也 风流 。