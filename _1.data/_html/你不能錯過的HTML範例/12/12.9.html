<!DOCTYPE HTML>
<html>
    <head>
        <title>第12章</title>
    </head>
    <body onload="onLoad()">
        <div id="test" style="width:1px;height:17px;background:#0f0;">0%</div>
        <input type="button" value="Run" id="run"/>

        <script type="text/javascript" charset="utf-8">
        window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
        var start = null;
        var ele = document.getElementById("test");
        var progress = 0;

        function step(timestamp) {
            progress += 1;
            ele.style.width = progress + "%";
            ele.innerHTML=progress + "%";
            if (progress < 100) {
                requestAnimationFrame(step);
            }
        }
        requestAnimationFrame(step);
        document.getElementById("run").addEventListener("click", function() {
            ele.style.width = "1px";
            progress = 0;
            requestAnimationFrame(step);
        }, false);
        </script>
    </body>
</html>
